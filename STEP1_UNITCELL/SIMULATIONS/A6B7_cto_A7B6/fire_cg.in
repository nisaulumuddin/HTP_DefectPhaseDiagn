units           metal
dimension       3
boundary        p p p
atom_style      atomic

variable        name string fire_cg_raw_Ta6Fe7_unitcell  

read_data       ${name}.data

change_box      all triclinic
change_box      all x final -0.01903892542909581 4.95796669222909 y final -0.016488193085072766 4.293725106585076 z final 0.3161386018227416 26.78100583187729  xy final -2.4885028088322594 remap
replicate       5 5 5

mass            1  180.94788   # Ta
mass            2  55.845    # Fe

pair_style     grace pad_verbose
pair_coeff     * * ../../STATIC_FILES/POTENTIALS/GRACE-2L-OMAT Ta Fe

neighbor        1.4 bin
neigh_modify    every 1 delay 10 check yes

compute         peatom all pe/atom
compute         keatom all ke/atom

log             fire_cg_${name}.log

thermo          10
thermo_style    custom step time temp fnorm pe ke lx ly lz pxx pyy pzz pxy pxz pyz

timestep        0.001

min_style       fire
minimize        0.0 1.0e-8 2000 4000

#write_data      fire_${name}.data

fix             3 all box/relax z 0.0 vmax 0.001
min_style       cg
minimize        0.0 1.0e-8 1000 2000
unfix           3
min_style       fire
minimize        0.0 1.0e-8 2000 4000

fix             3 all box/relax z 0.0 vmax 0.001
min_style       cg
minimize        0.0 1.0e-8 1000 2000
unfix           3
min_style       fire
minimize        0.0 1.0e-8 2000 4000

fix             3 all box/relax z 0.0 vmax 0.001
min_style       cg
minimize        0.0 1.0e-8 1000 2000
unfix           3
min_style       fire
minimize        0.0 1.0e-8 2000 4000

fix             3 all box/relax z 0.0 vmax 0.001
min_style       cg
minimize        0.0 1.0e-8 1000 2000
unfix           3
min_style       fire
minimize        0.0 1.0e-8 2000 4000

fix             3 all box/relax z 0.0 vmax 0.001
min_style       cg
minimize        0.0 1.0e-8 1000 2000
unfix           3
min_style       fire
minimize        0.0 1.0e-8 2000 4000

fix             3 all box/relax z 0.0 vmax 0.001
min_style       cg
minimize        0.0 1.0e-8 1000 2000
unfix           3

write_data      fire_cg_${name}.data

write_data      bi_minimised.data

print """- step: $(step)
  atoms: $(atoms)
  temp: $(temp)
  press: $(press)
  pe: $(pe)
  ke: $(ke)
  etotal: $(etotal)
  vol: $(vol)
  avecx: $(avecx)
  avecy: $(avecy)
  avecz: $(avecz)
  bvecx: $(bvecx)
  bvecy: $(bvecy)
  bvecz: $(bvecz)
  cvecx: $(cvecx)
  cvecy: $(cvecy)
  cvecz: $(cvecz)
  lx: $(lx)
  ly: $(ly)
  lz: $(lz)
  cella: $(cella)
  cellb: $(cellb)
  cellc: $(cellc)
  cellalpha: $(cellalpha)
  cellbeta: $(cellbeta)
  cellgamma: $(cellgamma)
  pxx: $(pxx)
  pyy: $(pyy)
  pzz: $(pzz)
  pxy: $(pxy)
  pyz: $(pyz)
  pxz: $(pxz)
  xlo: $(xlo)
  xhi: $(xhi)
  ylo: $(ylo)
  yhi: $(yhi)
  zlo: $(zlo)
  zhi: $(zhi)
  xy: $(xy)
  xz: $(xz)
  yz: $(yz)
""" file bi_minimised.data.yaml screen yes universe no
